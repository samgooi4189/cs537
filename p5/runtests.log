
**********************************************************************

Test build
build project using make

**********************************************************************
make clean
rm -f server.o client.o udp.o mfs.o libmfs.so server client lib
make
gcc -Wall -c server.c -o server.o
gcc -Wall -c udp.c -o udp.o
gcc -o server server.o udp.o 
gcc -Wall -c client.c -o client.o
gcc -o client client.o udp.o 
gcc -Wall -c mfs.c -o mfs.o
gcc -Wall -shared -fPIC -o libmfs.so mfs.c udp.c


test build PASSED
 (build project using make)


**********************************************************************

Test shutdown
init server and client then call shutdown

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test shutdown PASSED
 (init server and client then call shutdown)


**********************************************************************

Test creat
creat a file and check with lookup

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test creat PASSED
 (creat a file and check with lookup)


**********************************************************************

Test write
write then read one block

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test write PASSED
 (write then read one block)


**********************************************************************

Test stat
stat a regular file

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test stat PASSED
 (stat a regular file)


**********************************************************************

Test overwrite
overwrite a block

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test overwrite PASSED
 (overwrite a block)


**********************************************************************

Test maxfile
write largest possible file

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test maxfile PASSED
 (write largest possible file)


**********************************************************************

Test maxfile2
write more blocks than possible

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test maxfile2 PASSED
 (write more blocks than possible)


**********************************************************************

Test sparse
write first and last block

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test sparse PASSED
 (write first and last block)


**********************************************************************

Test stat2
stat a sparse file

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test stat2 PASSED
 (stat a sparse file)


**********************************************************************

Test dir
check root for dot entries

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test dir PASSED
 (check root for dot entries)


**********************************************************************

Test dir2
create a new directory and check it

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test dir2 PASSED
 (create a new directory and check it)


**********************************************************************

Test baddir
try to create a file with a file parent inode

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test baddir PASSED
 (try to create a file with a file parent inode)


**********************************************************************

Test baddir2
try to lookup a file with a file parent inode

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test baddir2 PASSED
 (try to lookup a file with a file parent inode)


**********************************************************************

Test unlink
unlink a file

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test unlink PASSED
 (unlink a file)


**********************************************************************

Test unlink2
unlink a directory

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test unlink2 PASSED
 (unlink a directory)


**********************************************************************

Test empty
unlink a non-empty directory

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test empty PASSED
 (unlink a non-empty directory)


**********************************************************************

Test name
name too long

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test name PASSED
 (name too long)


**********************************************************************

Test persist
restart server after creating a file

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized
Using old file of size 30328
Started listening at port 28270


test persist PASSED
 (restart server after creating a file)


**********************************************************************

Test drop
drop every other packet sent by client

**********************************************************************
make clean
rm -f server.o client.o udp.o mfs.o libmfs.so server client lib
make
gcc -Wall -c server.c -o server.o
gcc -Wall -c udp.c -o udp.o
gcc -o server server.o udp.o 
gcc -Wall -c client.c -o client.o
gcc -o client client.o udp.o 
gcc -Wall -c mfs.c -o mfs.o
gcc -Wall -shared -fPIC -o libmfs.so mfs.c udp.c
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
tester: drop packet
make clean
rm -f server.o client.o udp.o mfs.o libmfs.so server client lib
make
gcc -Wall -c server.c -o server.o
gcc -Wall -c udp.c -o udp.o
gcc -o server server.o udp.o 
gcc -Wall -c client.c -o client.o
gcc -o client client.o udp.o 
gcc -Wall -c mfs.c -o mfs.o
gcc -Wall -shared -fPIC -o libmfs.so mfs.c udp.c


test drop PASSED
 (drop every other packet sent by client)


**********************************************************************

Test bigdir
create a directory with max number of files

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test bigdir PASSED
 (create a directory with max number of files)


**********************************************************************

Test bigdir2
create a directory with more files than possible

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test bigdir2 PASSED
 (create a directory with more files than possible)


**********************************************************************

Test deep
create many deeply nested directories

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test deep PASSED
 (create many deeply nested directories)


**********************************************************************

Test complex
a long sequence of creats and writes followed by a check

**********************************************************************
Filesyste to be written:

/1
/1/1
/1/1/file2 [1, None, 1]
/1/1/file1 [2]
/1/file2 [1]
/1/file1 [1]
/1/2
/1/2/file2 [1, None, 2]
/1/2/file1 [3]
/1/0
/1/0/file2 [1, None, 0]
/1/0/file1 [1]
/0
/0/1
/0/1/file2 [0, None, 1]
/0/1/file1 [1]
/0/file2 [0]
/0/file1 [0]
/0/2
/0/2/file2 [0, None, 2]
/0/2/file1 [2]
/0/0
/0/0/file2 [0, None, 0]
/0/0/file1 [0]
/2
/2/1
/2/1/file2 [2, None, 1]
/2/1/file1 [3]
/2/file2 [2]
/2/file1 [2]
/2/2
/2/2/file2 [2, None, 2]
/2/2/file1 [4]
/2/0
/2/0/file2 [2, None, 0]
/2/0/file1 [2]
checking /1/1/file2
checking /1/1/file1
checking /1/file2
checking /1/file1
checking /1/2/file2
checking /1/2/file1
checking /1/0/file2
checking /1/0/file1
checking /0/1/file2
checking /0/1/file1
checking /0/file2
checking /0/file1
checking /0/2/file2
checking /0/2/file1
checking /0/0/file2
checking /0/0/file1
checking /2/1/file2
checking /2/1/file1
checking /2/file2
checking /2/file1
checking /2/2/file2
checking /2/2/file1
checking /2/0/file2
checking /2/0/file1
Initializing new file
Started listening at port 28270
Server initialized


test complex PASSED
 (a long sequence of creats and writes followed by a check)


**********************************************************************

Test complex2
a long sequence of creats and writes followed by a check

**********************************************************************
Filesyste to be written:

/1
/1/1
/1/1/1
/1/1/1/file2 [1, None, 1, None, 1]
/1/1/1/file1 [3]
/1/1/file2 [1, None, 1]
/1/1/file1 [2]
/1/1/0
/1/1/0/file2 [1, None, 1, None, 0]
/1/1/0/file1 [2]
/1/file2 [2]
/1/file1 [1]
/1/2
/1/2/1
/1/2/1/file2 [1, None, 2, None, 1]
/1/2/1/file1 [4]
/1/2/file2 [1, None, 2]
/1/2/file1 [3]
/1/2/0
/1/2/0/file2 [1, None, 2, None, 0]
/1/2/0/file1 [3]
/1/0
/1/0/1
/1/0/1/file2 [1, None, 0, None, 1]
/1/0/1/file1 [2]
/1/0/file2 [1, None, 0]
/1/0/file1 [1]
/1/0/0
/1/0/0/file2 [1, None, 0, None, 0]
/1/0/0/file1 [1]
/0
/0/1
/0/1/1
/0/1/1/file2 [0, None, 1, None, 1]
/0/1/1/file1 [2]
/0/1/file2 [0, None, 1]
/0/1/file1 [1]
/0/1/0
/0/1/0/file2 [0, None, 1, None, 0]
/0/1/0/file1 [1]
/0/file2 [0]
/0/file1 [0]
/0/2
/0/2/1
/0/2/1/file2 [0, None, 2, None, 1]
/0/2/1/file1 [3]
/0/2/file2 [0, None, 2]
/0/2/file1 [2]
/0/2/0
/0/2/0/file2 [0, None, 2, None, 0]
/0/2/0/file1 [2]
/0/0
/0/0/1
/0/0/1/file2 [0, None, 0, None, 1]
/0/0/1/file1 [1]
/0/0/file2 [0, None, 0]
/0/0/file1 [0]
/0/0/0
/0/0/0/file2 [0, None, 0, None, 0]
/0/0/0/file1 [0]
/3
/3/1
/3/1/1
/3/1/1/file2 [3, None, 1, None, 1]
/3/1/1/file1 [5]
/3/1/file2 [3, None, 1]
/3/1/file1 [4]
/3/1/0
/3/1/0/file2 [3, None, 1, None, 0]
/3/1/0/file1 [4]
/3/file2 [6]
/3/file1 [3]
/3/2
/3/2/1
/3/2/1/file2 [3, None, 2, None, 1]
/3/2/1/file1 [6]
/3/2/file2 [3, None, 2]
/3/2/file1 [5]
/3/2/0
/3/2/0/file2 [3, None, 2, None, 0]
/3/2/0/file1 [5]
/3/0
/3/0/1
/3/0/1/file2 [3, None, 0, None, 1]
/3/0/1/file1 [4]
/3/0/file2 [3, None, 0]
/3/0/file1 [3]
/3/0/0
/3/0/0/file2 [3, None, 0, None, 0]
/3/0/0/file1 [3]
/2
/2/1
/2/1/1
/2/1/1/file2 [2, None, 1, None, 1]
/2/1/1/file1 [4]
/2/1/file2 [2, None, 1]
/2/1/file1 [3]
/2/1/0
/2/1/0/file2 [2, None, 1, None, 0]
/2/1/0/file1 [3]
/2/file2 [4]
/2/file1 [2]
/2/2
/2/2/1
/2/2/1/file2 [2, None, 2, None, 1]
/2/2/1/file1 [5]
/2/2/file2 [2, None, 2]
/2/2/file1 [4]
/2/2/0
/2/2/0/file2 [2, None, 2, None, 0]
/2/2/0/file1 [4]
/2/0
/2/0/1
/2/0/1/file2 [2, None, 0, None, 1]
/2/0/1/file1 [3]
/2/0/file2 [2, None, 0]
/2/0/file1 [2]
/2/0/0
/2/0/0/file2 [2, None, 0, None, 0]
/2/0/0/file1 [2]
checking /1/1/1/file2
checking /1/1/1/file1
checking /1/1/file2
checking /1/1/file1
checking /1/1/0/file2
checking /1/1/0/file1
checking /1/file2
checking /1/file1
checking /1/2/1/file2
checking /1/2/1/file1
checking /1/2/file2
checking /1/2/file1
checking /1/2/0/file2
checking /1/2/0/file1
checking /1/0/1/file2
checking /1/0/1/file1
checking /1/0/file2
checking /1/0/file1
checking /1/0/0/file2
checking /1/0/0/file1
checking /0/1/1/file2
checking /0/1/1/file1
checking /0/1/file2
checking /0/1/file1
checking /0/1/0/file2
checking /0/1/0/file1
checking /0/file2
checking /0/file1
checking /0/2/1/file2
checking /0/2/1/file1
checking /0/2/file2
checking /0/2/file1
checking /0/2/0/file2
checking /0/2/0/file1
checking /0/0/1/file2
checking /0/0/1/file1
checking /0/0/file2
checking /0/0/file1
checking /0/0/0/file2
checking /0/0/0/file1
checking /3/1/1/file2
checking /3/1/1/file1
checking /3/1/file2
checking /3/1/file1
checking /3/1/0/file2
checking /3/1/0/file1
checking /3/file2
checking /3/file1
checking /3/2/1/file2
checking /3/2/1/file1
checking /3/2/file2
checking /3/2/file1
checking /3/2/0/file2
checking /3/2/0/file1
checking /3/0/1/file2
checking /3/0/1/file1
checking /3/0/file2
checking /3/0/file1
checking /3/0/0/file2
checking /3/0/0/file1
checking /2/1/1/file2
checking /2/1/1/file1
checking /2/1/file2
checking /2/1/file1
checking /2/1/0/file2
checking /2/1/0/file1
checking /2/file2
checking /2/file1
checking /2/2/1/file2
checking /2/2/1/file1
checking /2/2/file2
checking /2/2/file1
checking /2/2/0/file2
checking /2/2/0/file1
checking /2/0/1/file2
checking /2/0/1/file1
checking /2/0/file2
checking /2/0/file1
checking /2/0/0/file2
test complex2 FAILED


test complex2 FAILED
 (a long sequence of creats and writes followed by a check)
 Timelimit (30.0s) exceeded


**********************************************************************

Test persist2
restart server after creating many dirs and files

**********************************************************************
Filesyste to be written:

/1
/1/1
/1/1/1
/1/1/1/file2 [1, None, 1, None, 1]
/1/1/1/file1 [3]
/1/1/file2 [1, None, 1]
/1/1/file1 [2]
/1/1/0
/1/1/0/file2 [1, None, 1, None, 0]
/1/1/0/file1 [2]
/1/file2 [2]
/1/file1 [1]
/1/2
/1/2/1
/1/2/1/file2 [1, None, 2, None, 1]
/1/2/1/file1 [4]
/1/2/file2 [1, None, 2]
/1/2/file1 [3]
/1/2/0
/1/2/0/file2 [1, None, 2, None, 0]
/1/2/0/file1 [3]
/1/0
/1/0/1
/1/0/1/file2 [1, None, 0, None, 1]
/1/0/1/file1 [2]
/1/0/file2 [1, None, 0]
/1/0/file1 [1]
/1/0/0
/1/0/0/file2 [1, None, 0, None, 0]
/1/0/0/file1 [1]
/0
/0/1
/0/1/1
/0/1/1/file2 [0, None, 1, None, 1]
/0/1/1/file1 [2]
/0/1/file2 [0, None, 1]
/0/1/file1 [1]
/0/1/0
/0/1/0/file2 [0, None, 1, None, 0]
/0/1/0/file1 [1]
/0/file2 [0]
/0/file1 [0]
/0/2
/0/2/1
/0/2/1/file2 [0, None, 2, None, 1]
/0/2/1/file1 [3]
/0/2/file2 [0, None, 2]
/0/2/file1 [2]
/0/2/0
/0/2/0/file2 [0, None, 2, None, 0]
/0/2/0/file1 [2]
/0/0
/0/0/1
/0/0/1/file2 [0, None, 0, None, 1]
/0/0/1/file1 [1]
/0/0/file2 [0, None, 0]
/0/0/file1 [0]
/0/0/0
/0/0/0/file2 [0, None, 0, None, 0]
/0/0/0/file1 [0]
/3
/3/1
/3/1/1
/3/1/1/file2 [3, None, 1, None, 1]
/3/1/1/file1 [5]
/3/1/file2 [3, None, 1]
/3/1/file1 [4]
/3/1/0
/3/1/0/file2 [3, None, 1, None, 0]
/3/1/0/file1 [4]
/3/file2 [6]
/3/file1 [3]
/3/2
/3/2/1
/3/2/1/file2 [3, None, 2, None, 1]
/3/2/1/file1 [6]
/3/2/file2 [3, None, 2]
/3/2/file1 [5]
/3/2/0
/3/2/0/file2 [3, None, 2, None, 0]
/3/2/0/file1 [5]
/3/0
/3/0/1
/3/0/1/file2 [3, None, 0, None, 1]
/3/0/1/file1 [4]
/3/0/file2 [3, None, 0]
/3/0/file1 [3]
/3/0/0
/3/0/0/file2 [3, None, 0, None, 0]
/3/0/0/file1 [3]
/2
/2/1
/2/1/1
/2/1/1/file2 [2, None, 1, None, 1]
/2/1/1/file1 [4]
/2/1/file2 [2, None, 1]
/2/1/file1 [3]
/2/1/0
/2/1/0/file2 [2, None, 1, None, 0]
/2/1/0/file1 [3]
/2/file2 [4]
/2/file1 [2]
/2/2
/2/2/1
/2/2/1/file2 [2, None, 2, None, 1]
/2/2/1/file1 [5]
/2/2/file2 [2, None, 2]
/2/2/file1 [4]
/2/2/0
/2/2/0/file2 [2, None, 2, None, 0]
/2/2/0/file1 [4]
/2/0
/2/0/1
/2/0/1/file2 [2, None, 0, None, 1]
/2/0/1/file1 [3]
/2/0/file2 [2, None, 0]
/2/0/file1 [2]
/2/0/0
/2/0/0/file2 [2, None, 0, None, 0]
/2/0/0/file1 [2]
checking /1/1/1/file2
checking /1/1/1/file1
checking /1/1/file2
checking /1/1/file1
checking /1/1/0/file2
checking /1/1/0/file1
checking /1/file2
checking /1/file1
checking /1/2/1/file2
checking /1/2/1/file1
checking /1/2/file2
checking /1/2/file1
checking /1/2/0/file2
checking /1/2/0/file1
checking /1/0/1/file2
checking /1/0/1/file1
checking /1/0/file2
checking /1/0/file1
checking /1/0/0/file2
checking /1/0/0/file1
checking /0/1/1/file2
checking /0/1/1/file1
checking /0/1/file2
checking /0/1/file1
checking /0/1/0/file2
checking /0/1/0/file1
checking /0/file2
checking /0/file1
checking /0/2/1/file2
checking /0/2/1/file1
checking /0/2/file2
checking /0/2/file1
checking /0/2/0/file2
checking /0/2/0/file1
checking /0/0/1/file2
checking /0/0/1/file1
checking /0/0/file2
checking /0/0/file1
checking /0/0/0/file2
checking /0/0/0/file1
checking /3/1/1/file2
checking /3/1/1/file1
checking /3/1/file2
checking /3/1/file1
checking /3/1/0/file2
checking /3/1/0/file1
checking /3/file2
checking /3/file1
checking /3/2/1/file2
checking /3/2/1/file1
checking /3/2/file2
checking /3/2/file1
checking /3/2/0/file2
checking /3/2/0/file1
checking /3/0/1/file2
checking /3/0/1/file1
checking /3/0/file2
checking /3/0/file1
checking /3/0/0/file2
checking /3/0/0/file1
checking /2/1/1/file2
checking /2/1/1/file1
checking /2/1/file2
checking /2/1/file1
checking /2/1/0/file2
checking /2/1/0/file1
checking /2/file2
checking /2/file1
checking /2/2/1/file2
checking /2/2/1/file1
checking /2/2/file2
checking /2/2/file1
checking /2/2/0/file2
checking /2/2/0/file1
checking /2/0/1/file2
checking /2/0/1/file1
checking /2/0/file2
checking /2/0/file1
checking /2/0/0/file2
checking /2/0/0/file1
Initializing new file
Started listening at port 28270
Server initialized
checking /1/1/1/file2
checking /1/1/1/file1
checking /1/1/file2
checking /1/1/file1
checking /1/1/0/file2
test persist2 FAILED


test persist2 FAILED
 (restart server after creating many dirs and files)
 Timelimit (30.0s) exceeded


**********************************************************************

Test free
check that inodes and direcrtory entries are freed

**********************************************************************
Initializing new file
Started listening at port 28270
Server initialized


test free PASSED
 (check that inodes and direcrtory entries are freed)

**********************************************************************
Summary:
test build PASSED
 (build project using make)

test shutdown PASSED
 (init server and client then call shutdown)

test creat PASSED
 (creat a file and check with lookup)

test write PASSED
 (write then read one block)

test stat PASSED
 (stat a regular file)

test overwrite PASSED
 (overwrite a block)

test maxfile PASSED
 (write largest possible file)

test maxfile2 PASSED
 (write more blocks than possible)

test sparse PASSED
 (write first and last block)

test stat2 PASSED
 (stat a sparse file)

test dir PASSED
 (check root for dot entries)

test dir2 PASSED
 (create a new directory and check it)

test baddir PASSED
 (try to create a file with a file parent inode)

test baddir2 PASSED
 (try to lookup a file with a file parent inode)

test unlink PASSED
 (unlink a file)

test unlink2 PASSED
 (unlink a directory)

test empty PASSED
 (unlink a non-empty directory)

test name PASSED
 (name too long)

test persist PASSED
 (restart server after creating a file)

test drop PASSED
 (drop every other packet sent by client)

test bigdir PASSED
 (create a directory with max number of files)

test bigdir2 PASSED
 (create a directory with more files than possible)

test deep PASSED
 (create many deeply nested directories)

test complex PASSED
 (a long sequence of creats and writes followed by a check)

test complex2 FAILED
 (a long sequence of creats and writes followed by a check)
 Timelimit (30.0s) exceeded

test persist2 FAILED
 (restart server after creating many dirs and files)
 Timelimit (30.0s) exceeded

test free PASSED
 (check that inodes and direcrtory entries are freed)

Passed 25 of 27 tests.
Overall 25 of 27
